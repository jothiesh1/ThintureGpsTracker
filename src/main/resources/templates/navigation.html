<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>

    <title>Thinture GPS</title>
    <link rel="icon" type="image/x-icon" href="THINTURE_IMAGE/favicon.jpg">
</head>
<body>
	  <div th:fragment="navbar">
		<nav class="navbar navbar-expand-lg navbar-dark">
		        <div class="container">
		            <a href="#" class="navbar-brand">
		                <img src="/THINTURE_IMAGE/thinlogo.png" alt="Fleet Tracking Logo" height="60">
		            </a>
					<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
					    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
					    <span class="navbar-toggler-icon"></span>
					</button>


		            <div class="collapse navbar-collapse" id="navbarNav">
		                <ul class="navbar-nav ms-auto">
		                    <li class="nav-item">
		                        <a class="nav-link" href="/dashboard"><strong>HOME</strong></a>
		                    </li>
							<li class="nav-item dropdown">
							    <a class="nav-link dropdown-toggle" href="#" id="managerDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
							        <strong>SUPERADMIN</strong>
							    </a>
							    <ul class="dropdown-menu" aria-labelledby="managerDropdown">
									<li><a class="dropdown-item"href="/admins/add">New Admin</a></li>
																			<li><a class="dropdown-item" href="/add_dealer">New Dealer</a></li>
																			<li><a class="dropdown-item" href="/add_client">New Client</a></li>
														                   <li> <a class="dropdown-item" href="/add_user">New User</a></li>
																		   <li><a class="dropdown-item" href="/add_driver">New Driver</a></li>
																		   
																		</ul>
							</li>
							<li class="nav-item dropdown">
															<a class="nav-link dropdown-toggle" href="#" id="configDropdown" data-bs-toggle="dropdown">
															<strong>ASSIGN DEVICES</strong>
																				        </a>
														    <ul class="dropdown-menu">
														    <li><a class="dropdown-item" href="/Add_devices_dealer">Add Device To Dealer</a></li>
															<li><a class="dropdown-item" href="/Add_devices_client">Add Device To Client</a></li>
																																									   
															<li><a class="dropdown-item" href="/add_rfidto_dealer">Add RFID To Dealer</a></li>
															<li><a class="dropdown-item" href="/add_rfidto_client">Add RFID To Client</a></li>
																												                          
																												                       </ul>
																												                   </li>
		                    <li class="nav-item dropdown">
		                        <a class="nav-link dropdown-toggle" href="#" id="trackingDropdown" role="button"
		                            data-bs-toggle="dropdown" aria-expanded="false">
		                            <strong>TRACKING</strong>
		                        </a>
		                        <ul class="dropdown-menu">
		                            <li><a class="dropdown-item" href="/map4">Live Map</a></li>
		                            <li><a class="dropdown-item" href="/replay">Playback Track</a></li>
		                            <li><a class="dropdown-item" href="/map2">Report</a></li>
									
									   <li><a class="dropdown-item" href="/map7">maptest</a></li>
		                        </ul>
		                    </li>
							<li class="nav-item dropdown">
							                       <a class="nav-link dropdown-toggle" href="#" id="configDropdown" data-bs-toggle="dropdown">
							                           <strong>CONFIGURATION</strong>
							                       </a>
							                       <ul class="dropdown-menu">
							                           <li><a class="dropdown-item" href="/createdevices">Install</a></li>
							                           <li><a class="dropdown-item" href="#renewal">Renewal</a></li>
													    <li><a class="dropdown-item" href="/violation_send_mail">Mail</a></li>
														
							                          
							                       </ul>
							                   </li>
											   <li class="nav-item dropdown">
											                         <a class="nav-link dropdown-toggle" href="#" id="reportDropdown" data-bs-toggle="dropdown">
											                             <strong>REPORT</strong>
											                         </a>
											                         <ul class="dropdown-menu">
											                             <li><a class="dropdown-item" href="/event">Event & Violations</a></li>
																		 <li><a class="dropdown-item" href="/device_report">Installation Report</a></li>
																		 <li><a class="dropdown-item" href="/view_superadmin_complaints">view complaints </a></li>
											                         </ul>
											                     </li>
																 <li class="nav-item dropdown">
																  <a class="nav-link dropdown-toggle" href="#" id="reportDropdown" data-bs-toggle="dropdown">
																 	<strong>Users Management</strong>
																  </a>
																 <ul class="dropdown-menu">
																  <li><a class="dropdown-item" href="/admin_view">Admin</a></li>
																  <li><a class="dropdown-item" href="/dealer_view">Dealer</a></li>
																  <li><a class="dropdown-item" href="/client_view">Client</a></li>
																  <li><a class="dropdown-item" href="/users_view">User</a></li>
																  <li><a class="dropdown-item" href="/driver_view">driver</a></li>
																  
																 </ul>
																 </li>
																 <li class="nav-item dropdown">
																 <a class="nav-link dropdown-toggle" href="#" id="reportDropdown" data-bs-toggle="dropdown">
																 <strong>NOTIFICATIONS</strong>
																  </a>
																  <ul class="dropdown-menu">
																	<li><a class="dropdown-item" href="/alert">Alerts</a></li>																 																 										                             
																	</ul>													 																 																	 
																	</li>																	 																 										                       
																  																 																 										                   				 																 										                         
											                     <li class="nav-item dropdown">
											                         <a class="nav-link dropdown-toggle" href="#" id="profileDropdown" data-bs-toggle="dropdown">
											                             <strong id="profileid">PROFILE</strong>
											                         </a>
																	
											                         <ul class="dropdown-menu">
											                             <li><a class="dropdown-item" href="/profile_superadmin">Profile</a></li>
																		 <a class="dropdown-item logout-item" onclick="logout()">
																		    <i class="fas fa-sign-out-alt"></i> Logout
																		  </a>
											                         </ul>
											                     </li>
																 <li class="nav-item">
																     <a class="nav-link" href="#" id="refreshPage">
																           <strong><i class="fas fa-redo" id="refreshIcon"></i> REFRESH</strong>
																     </a>
																 </li>

		                </ul>
		            </div>
		        </div>
		    </nav>
			<div class="navigation-buttons">
					    <button id="backward-button" class="btn btn-secondary">
					        <i class="fas fa-arrow-left"></i> Back
					    </button>
						
					    <button id="forward-button" class="btn btn-secondary">
					        Forward <i class="fas fa-arrow-right"></i>
					    </button>
						
					</div>
		    <!-- Bootstrap JavaScript -->
		    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>

		    <!-- Initialize Bootstrap Dropdown Manually -->
		    <script>
		        document.addEventListener("DOMContentLoaded", function () {
		            var dropdowns = document.querySelectorAll('.dropdown-toggle');
		            dropdowns.forEach(function (dropdown) {
		                new bootstrap.Dropdown(dropdown);
		            });
		        });
		    </script>
			<script>
			 // Function to display username in the navigation bar
			document.addEventListener("DOMContentLoaded", function () {
			 const username = localStorage.getItem("username"); // Retrieve username from localStorage
			const roleLabel = document.getElementById("profileid"); // Get the navigation element

			if (username && roleLabel) {
			roleLabel.innerHTML = `<strong>${username}</strong>`; // Replace "PROFILE" with the username
		}
			});
			
			
			// Logout function
																																				function logout() {
																																				    Swal.fire({
																																				        title: 'Are you sure?',
																																				        text: "You will be logged out of your account.",
																																				        icon: 'warning',
																																				        showCancelButton: true,
																																				        confirmButtonColor: '#3085d6',
																																				        cancelButtonColor: '#d33',
																																				        confirmButtonText: 'Yes, log out!',
																																				        cancelButtonText: 'Cancel'
																																				    }).then((result) => {
																																				        if (result.isConfirmed) {
																																				            // Remove username from localStorage
																																				            localStorage.removeItem("username");

																																				            // Redirect to the login page
																																				            window.location.href = "/login";
																																				        }
																																				    });
																																				}

			
			
			document.addEventListener("DOMContentLoaded", function () {
			    const navbarToggler = document.querySelector(".navbar-toggler");
			    const navbarCollapse = document.querySelector(".navbar-collapse");
			    const dropdowns = document.querySelectorAll(".dropdown");

			    // Toggle the navigation menu
			    navbarToggler.addEventListener("click", function () {
			        navbarCollapse.classList.toggle("show"); // Show or hide menu
			    });

			    // Toggle submenus only on mobile
			    dropdowns.forEach((dropdown) => {
			        const toggle = dropdown.querySelector(".nav-link");

			        toggle.addEventListener("click", function (e) {
			            if (window.innerWidth <= 991) {
			                e.preventDefault(); // Prevent default link behavior
			                
			                // Toggle the clicked dropdown
			                dropdown.classList.toggle("show");

			                // Close other dropdowns when one is opened
			                dropdowns.forEach((otherDropdown) => {
			                    if (otherDropdown !== dropdown) {
			                        otherDropdown.classList.remove("show");
			                    }
			                });
			            }
			        });
			    });

			    // Close menu when clicking outside
			    document.addEventListener("click", function (e) {
			        if (!e.target.closest(".navbar") && !e.target.closest(".dropdown")) {
			            navbarCollapse.classList.remove("show"); // Close menu
			            dropdowns.forEach((dropdown) => {
			                dropdown.classList.remove("show"); // Close dropdowns
			            });
			        }
			    });
			});

</script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const navbarToggler = document.querySelector(".navbar-toggler");
        const navbarCollapse = document.querySelector("#navbarNav");
        let isNavbarOpen = false; // Track navbar state

        navbarToggler.addEventListener("click", function () {
            if (!isNavbarOpen) {
                navbarCollapse.style.display = "block"; // Show navbar
                isNavbarOpen = true;
            } else {
                navbarCollapse.style.display = "none"; // Hide navbar
                isNavbarOpen = false;
            }
        });
    });
</script>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const refreshBtn = document.getElementById("refreshPage");
    const refreshIcon = document.getElementById("refreshIcon");

    refreshBtn.addEventListener("click", function (e) {
        e.preventDefault();

        // Add spin class
        refreshIcon.classList.add("fa-spin");

        // Simulate delay or refresh
        setTimeout(() => {
            location.reload(); // Refresh the page
        }, 500); // delay for animation effect (optional)
    });
});
</script>

<script>
		    document.getElementById('backward-button').addEventListener('click', () => {
		        window.history.back();
		    });

		    document.getElementById('forward-button').addEventListener('click', () => {
		        window.history.forward();
		    });
		</script>



</body>
</html>
