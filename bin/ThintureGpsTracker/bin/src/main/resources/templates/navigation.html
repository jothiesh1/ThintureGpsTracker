<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.0/xlsx.full.min.js"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
	

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <title>THINTURE - Fleet Management</title>
	
</head>
<body>
    <!-- navigation.html -->
    <div th:fragment="navbar">
		
		<nav class="navbar navbar-expand-lg navbar-light">
		        <a href="#" class="logo">
		            <img src="/THINTURE_IMAGE/thinlogo.png" alt="Fleet Tracking Logo">
		        </a>
		      
		            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
		                <span class="navbar-toggler-icon"></span>
		            </button>
					<div class="container">
						
						
						
		            <div class="collapse navbar-collapse" id="navbarNav">
		                <ul class="navbar-nav ms-auto">
						
							
							<li class="nav-item">
							               
											   <a href="/dashboard" class="dropdown-toggle nav-link" id="roleLabel"><strong>HOME</strong></a>
							               </li>
									
						
		                    <li class="nav-item dropdown">
		                        <a href="#" class="dropdown-toggle nav-link" id="roleLabel"><strong>SUPERADMIN</strong></a>
		                        <div class="dropdown-content">
		                            <a href="#" class="submenu-toggle">Multi-Role</a>
		                            <div class="submenu-content">
										<a href="/admins/add">New Admin</a>
										<a href="/dealers/add">New Dealer</a>
										<a href="/client">New Client</a>
					                    <a href="/users/add">New User</a>
		                            </div>
		                            <a href="#" class="submenu-toggle">Driver</a>
		                            <div class="submenu-contentdv">
										<a href="/add_driver">New Driver</a>
						               
		                            </div>
		                            <a href="#" class="submenu-toggle">Add Devices</a>
		                            <div class="submenu-contentdevice">
										<a href="/Add_devices_dealer">Dealer</a>
								        <a href="/Add_devices_client">Client</a>
										<a href="/add_dealer_device_to_client">DealerToClient</a>
										
										
										
		                            </div>
		                        </div>
		                    </li>
		                </ul>
		            </div>
					
					
					<div class="collapse navbar-collapse" id="navbarNav">
					               <ul class="navbar-nav ms-auto">
					                   <li class="nav-item dropdown">
					                       <a href="#" class="dropdown-toggle nav-link" id="roleLabel"><strong>TRACKING</strong></a>
					                       <div class="dropdown-content">
					                           
											<!--<a href="/map">LiveTracking</a>-->
																			<a href="/map4">Live Map</a>
																			
																			<a href="/replay">PlayBack Track</a>
																			<a href="/map2">Report </a>
																			
																		</div> 
																				                      
																				                    </li>
																				                </ul>
																								</div>
																								
																								
																								
																								
																								<div class="collapse navbar-collapse" id="navbarNav">
																													               <ul class="navbar-nav ms-auto">
																													                   <li class="nav-item dropdown">
																													                       <a href="#" class="dropdown-toggle nav-link" id="roleLabel"><strong>CONFIGURATION</strong></a>
																													                       <div class="dropdown-content">
																													                           
																																			<a href="/createdevices">Install</a>
																																																																					
																																					                            <a href="#renewal">Renewal</a>
																																					                            
																																												<a href="/device_report">Search</a>
																																												
																																												
																																										</div>
																																												                      
																																												                    </li>
																																												                </ul>
																																																</div>
																																																
																																																
																																																
																				            
								   <div class="collapse navbar-collapse" id="navbarNav">
								   					               <ul class="navbar-nav ms-auto">
								   					                   <li class="nav-item dropdown">
								   					                       <a href="#" class="dropdown-toggle nav-link" id="roleLabel"><strong>REPORT</strong></a>
								   					                       <div class="dropdown-content">
								   					                           
																			<a href="/event">Event</a>
																					                            
																											</div>
																													                      
																													                    </li>
																													                </ul>
																																	</div>
																													          
							   
							   
																																	<div class="collapse navbar-collapse" id="navbarNav">
																																	    <ul class="navbar-nav ms-auto">
																																	        <li class="nav-item dropdown">
																																				<a href="#" class="dropdown-toggle nav-link" id="profileid">
																																				    <strong>PROFILE</strong>
																																				</a>

																																	            <div class="dropdown-content">
																																					<a href="">Profile</a>
																																	                <a onclick="logout()" id="dashboard-user">Logout</a>
																																	            </div>
																																	        </li>
																																	    </ul>
																																	</div>
</div>
																																	<script>
																																	    // Function to display username in the navigation bar
																																		document.addEventListener("DOMContentLoaded", function () {
																																		    const username = localStorage.getItem("username"); // Retrieve username from localStorage
																																		    const roleLabel = document.getElementById("profileid"); // Get the navigation element

																																		    if (username && roleLabel) {
																																		        roleLabel.innerHTML = `<strong>${username}</strong>`; // Replace "PROFILE" with the username
																																		    }
																																		});


																																	    // Logout function
																																		function logout() {
																																		    Swal.fire({
																																		        title: 'Are you sure?',
																																		        text: "You will be logged out of your account.",
																																		        icon: 'warning',
																																		        showCancelButton: true,
																																		        confirmButtonColor: '#3085d6',
																																		        cancelButtonColor: '#d33',
																																		        confirmButtonText: 'Yes, log out!',
																																		        cancelButtonText: 'Cancel'
																																		    }).then((result) => {
																																		        if (result.isConfirmed) {
																																		            // Remove username from localStorage
																																		            localStorage.removeItem("username");

																																		            // Redirect to the login page
																																		            window.location.href = "/login";
																																		        }
																																		    });
																																		}

																																	</script>
																																	<script>
																																	document.addEventListener("DOMContentLoaded", function () {
																																	    const toggler = document.querySelector(".navbar-toggler");
																																	    const navMenu = document.querySelector(".navbar-nav");
																																	    const dropdownToggles = document.querySelectorAll(".dropdown-toggle");
																																	    const submenuToggles = document.querySelectorAll(".submenu-toggle");

																																	    // Toggle Main Navbar
																																	    toggler.addEventListener("click", function () {
																																	        navMenu.classList.toggle("active");
																																	    });

																																	    // Toggle Dropdown Menus (Prevents Blinking)
																																	    dropdownToggles.forEach((toggle) => {
																																	        toggle.addEventListener("click", function (event) {
																																	            event.stopPropagation(); // Prevents closing when clicking inside
																																	            this.parentElement.classList.toggle("active");
																																	            closeOtherDropdowns(this.parentElement); // Close other open menus
																																	        });
																																	    });

																																	    // Toggle Submenus (Fix Blinking)
																																	    submenuToggles.forEach((toggle) => {
																																	        toggle.addEventListener("click", function (event) {
																																	            event.stopPropagation(); // Prevents menu from closing
																																	            this.nextElementSibling.classList.toggle("active");
																																	        });
																																	    });

																																	    // Close other dropdowns when opening a new one
																																	    function closeOtherDropdowns(current) {
																																	        document.querySelectorAll(".nav-item").forEach((item) => {
																																	            if (item !== current) {
																																	                item.classList.remove("active");
																																	            }
																																	        });
																																	    }

																																	    // Close menu when clicking outside
																																	    document.addEventListener("click", function (event) {
																																	        if (!navMenu.contains(event.target)) {
																																	            navMenu.classList.remove("active");
																																	        }
																																	    });
																																	});
																																	</script>


</body>
</html>