<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
	<style>
	 
</style>
    <title>Thinture GPS</title>
    <link rel="icon" type="image/x-icon" href="THINTURE_IMAGE/favicon.jpg">
</head>
<body>
	<div th:fragment="navbar_dealer">
		<nav class="navbar navbar-expand-lg navbar-dark">
		        <div class="container">
		            <a href="#" class="navbar-brand">
		                <img src="/THINTURE_IMAGE/thinlogo.png" alt="Fleet Tracking Logo" height="50">
		            </a>
					<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
					    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
					    <span class="navbar-toggler-icon"></span>
					</button>


		            <div class="collapse navbar-collapse" id="navbarNav">
		                <ul class="navbar-nav ms-auto">
		                    <li class="nav-item">
		                        <a class="nav-link" href="/dashboard_dealer"><strong>HOME</strong></a>
		                    </li>
							<li class="nav-item dropdown">
							    <a class="nav-link dropdown-toggle" href="#" id="managerDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
							        <strong>MANAGER</strong>
							    </a>
							    <ul class="dropdown-menu" aria-labelledby="managerDropdown">
							        <li><a class="dropdown-item" href="/addclient_dealer">Add Client</a></li>
							        <li><a class="dropdown-item" href="/adduser_dealer">Add User</a></li>
									<li><a class="dropdown-item" href="/add_dealer_device_to_client">DealerToClient</a></li>
							    </ul>
							</li>

		                    <li class="nav-item dropdown">
		                        <a class="nav-link dropdown-toggle" href="#" id="trackingDropdown" role="button"
		                            data-bs-toggle="dropdown" aria-expanded="false">
		                            <strong>TRACKING</strong>
		                        </a>
		                        <ul class="dropdown-menu">
		                            <li><a class="dropdown-item" href="/mapDealer">Live Map</a></li>
		                            <li><a class="dropdown-item" href="/playback_dealer">Playback Track</a></li>
		                 
		                        </ul>
		                    </li>
							<li class="nav-item dropdown">
							                       <a class="nav-link dropdown-toggle" href="#" id="configDropdown" data-bs-toggle="dropdown">
							                           <strong>CONFIGURATION</strong>
							                       </a>
							                       <ul class="dropdown-menu">
							                           <li><a class="dropdown-item" href="/installationDealer">Installation</a></li>
							                           <li><a class="dropdown-item" href="#renewal">Renewal</a></li>
							                           
							                       </ul>
							                   </li>
											   <li class="nav-item dropdown">
											                         <a class="nav-link dropdown-toggle" href="#" id="reportDropdown" data-bs-toggle="dropdown">
											                             <strong>REPORT</strong>
											                         </a>
											                         <ul class="dropdown-menu">
											                             <li><a class="dropdown-item" href="/event_dealer">Event & Violations</a></li>
																		 <li><a class="dropdown-item" href="/dealer_device_report">Installation Report</a></li>
											                         </ul>
											                     </li>
																 <li class="nav-item dropdown">
																 																 																 										                         <a class="nav-link dropdown-toggle" href="#" id="reportDropdown" data-bs-toggle="dropdown">
																 																 																 										                             <strong>NOTIFICATIONS</strong>
																 																 																 										                         </a>
																 																 																 										                         <ul class="dropdown-menu">
																 																 																 										                             <li><a class="dropdown-item" href="">Alerts</a></li>
																 																 																 																	 
																 																 																 										                         </ul>
																 																 																 			
											                     <li class="nav-item dropdown">
											                         <a class="nav-link dropdown-toggle" href="#" id="profileDropdown" data-bs-toggle="dropdown">
											                             <strong id="profileid">PROFILE</strong>
											                         </a>
											                         <ul class="dropdown-menu">
											                             <li><a class="dropdown-item" href="">Profile</a></li>
											                             <li>																		 <a class="dropdown-item logout-item" onclick="logout()">
																		 																	    <i class="fas fa-sign-out-alt"></i> Logout
																		 																	  </a></li>
											                         </ul>
											                     </li>
		                </ul>
		            </div>
		        </div>
		    </nav>

		    <!-- Bootstrap JavaScript -->
		    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>

		    <!-- Initialize Bootstrap Dropdown Manually -->
		    <script>
		        document.addEventListener("DOMContentLoaded", function () {
		            var dropdowns = document.querySelectorAll('.dropdown-toggle');
		            dropdowns.forEach(function (dropdown) {
		                new bootstrap.Dropdown(dropdown);
		            });
		        });
		    </script>
			<script>
			 // Function to display username in the navigation bar
			document.addEventListener("DOMContentLoaded", function () {
			 const username = localStorage.getItem("username"); // Retrieve username from localStorage
			const roleLabel = document.getElementById("profileid"); // Get the navigation element

			if (username && roleLabel) {
			roleLabel.innerHTML = `<strong>${username}</strong>`; // Replace "PROFILE" with the username
		}
			});
			
			
			// Logout function
																																				function logout() {
																																				    Swal.fire({
																																				        title: 'Are you sure?',
																																				        text: "You will be logged out of your account.",
																																				        icon: 'warning',
																																				        showCancelButton: true,
																																				        confirmButtonColor: '#3085d6',
																																				        cancelButtonColor: '#d33',
																																				        confirmButtonText: 'Yes, log out!',
																																				        cancelButtonText: 'Cancel'
																																				    }).then((result) => {
																																				        if (result.isConfirmed) {
																																				            // Remove username from localStorage
																																				            localStorage.removeItem("username");

																																				            // Redirect to the login page
																																				            window.location.href = "/login";
																																				        }
																																				    });
																																				}

			
			
			document.addEventListener("DOMContentLoaded", function () {
			    const navbarToggler = document.querySelector(".navbar-toggler");
			    const navbarCollapse = document.querySelector(".navbar-collapse");
			    const dropdowns = document.querySelectorAll(".dropdown");

			    // Toggle the navigation menu
			    navbarToggler.addEventListener("click", function () {
			        navbarCollapse.classList.toggle("show"); // Show or hide menu
			    });

			    // Toggle submenus only on mobile
			    dropdowns.forEach((dropdown) => {
			        const toggle = dropdown.querySelector(".nav-link");

			        toggle.addEventListener("click", function (e) {
			            if (window.innerWidth <= 991) {
			                e.preventDefault(); // Prevent default link behavior
			                
			                // Toggle the clicked dropdown
			                dropdown.classList.toggle("show");

			                // Close other dropdowns when one is opened
			                dropdowns.forEach((otherDropdown) => {
			                    if (otherDropdown !== dropdown) {
			                        otherDropdown.classList.remove("show");
			                    }
			                });
			            }
			        });
			    });

			    // Close menu when clicking outside
			    document.addEventListener("click", function (e) {
			        if (!e.target.closest(".navbar") && !e.target.closest(".dropdown")) {
			            navbarCollapse.classList.remove("show"); // Close menu
			            dropdowns.forEach((dropdown) => {
			                dropdown.classList.remove("show"); // Close dropdowns
			            });
			        }
			    });
			});

</script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const navbarToggler = document.querySelector(".navbar-toggler");
        const navbarCollapse = document.querySelector("#navbarNav");
        let isNavbarOpen = false; // Track navbar state

        navbarToggler.addEventListener("click", function () {
            if (!isNavbarOpen) {
                navbarCollapse.style.display = "block"; // Show navbar
                isNavbarOpen = true;
            } else {
                navbarCollapse.style.display = "none"; // Hide navbar
                isNavbarOpen = false;
            }
        });
    });
</script>





</body>
</html>
